<script src="https://unpkg.com/printd/printd.umd.min.js"></script>

<kt-portlet>
    <kt-portlet-header>
        <ng-container ktPortletTools>
            <div #wizard class="kt-grid kt-wizard-v3 kt-wizard-v3--white" id="kt_wizard_v3" data-ktwizard-state="step-first">
                <div class="kt-grid__item kt-grid__item--fluid kt-wizard-v3__wrapper">
                    <div class="kt-form__section kt-form__section--first">
                        <div class="row">
                            <div class="col-md-12">
                                <h3>Sales Reports</h3>
                            </div>
                            <!-- <div (click)="AddNew()" class="btn btn-secondary btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u" data-ktwizard-type="action-prev">
                                Add Purchase Order
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </ng-container>
    </kt-portlet-header>

    <kt-portlet-body>
        <div class="mat-table__wrapper">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <!-- <label>Search</label> -->
                        <input type="text" class="form-control" (keyup)="doFilter($event.target.value)" placeholder="Search">
                    </div>
                </div>
            </div>
            <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
                <ng-container matColumnDef="S.no">
                    <th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header> S.no </th>
                    <td mat-cell *matCellDef="let element;let i =  index"> {{i + 1}} </td>
                </ng-container>

                <ng-container matColumnDef="invoiceNumber">
                    <th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header> Invoice # </th>
                    <td mat-cell *matCellDef="let element"> {{element.invoiceNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="customerName">
                    <th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header>Customer </th>
                    <td mat-cell *matCellDef="let element"> {{element.customerName}} </td>
                </ng-container>

                <!-- <ng-container matColumnDef="branchName">
					<th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header>Branch </th>
					<td mat-cell *matCellDef="let element"> {{element.branchName}} </td>
				</ng-container> -->

                <ng-container matColumnDef="createdBy">
                    <th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header>Created By </th>
                    <td mat-cell *matCellDef="let element"> {{element.createdBy}} </td>
                </ng-container>

                <!-- <ng-container matColumnDef="discountAmount">
					<th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header> Discount Amount
					</th>
					<td mat-cell *matCellDef="let element"> {{element.discountAmount}} </td>
				</ng-container> -->

                <ng-container matColumnDef="receiveAmount">
                    <th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header> Received Amount
                    </th>
                    <td mat-cell *matCellDef="let element"> {{element.receiveAmount}} </td>
                </ng-container>

                <!-- <ng-container matColumnDef="taxAmount">
					<th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header> Tax Amount </th>
					<td mat-cell *matCellDef="let element"> {{element.taxAmount}} </td>
				</ng-container> -->

                <ng-container matColumnDef="subTotal">
                    <th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header> Sub Total </th>
                    <td mat-cell *matCellDef="let element"> {{element.subTotal}} </td>
                </ng-container>

                <ng-container matColumnDef="totalBill">
                    <th style="font-size: inherit;" mat-header-cell *matHeaderCellDef mat-sort-header>Total Bill </th>
                    <td mat-cell *matCellDef="let element"> {{element.totalBill}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <mat-header-cell style="font-size: inherit;margin-top: 16px;margin-left: 18px;" *matHeaderCellDef>
                        Actions
                    </mat-header-cell>
                    <mat-cell *matCellDef="let element">
                        <button mat-icon-button color="warn" class="cursor" [elementToPrint]="printThis" ngPrint (click)="Print(element)" matTooltip="Print Slip">
							<mat-icon>print</mat-icon>
						</button>&nbsp;
                        <!-- <button mat-icon-button color="warn" (click)="Delete(element)" matTooltip="Delete Employee"
							type="button">
							<mat-icon>delete</mat-icon>
						</button> -->
                    </mat-cell>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                </tr>
            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="5" showFirstLastButtons></mat-paginator>
        </div>
    </kt-portlet-body>
</kt-portlet>

<!-- <button [hidden]="true" (click)="Khaali()" type="button" #printBtn [elementToPrint]="printThis" ngPrint mat-icon-button color="warn" class="cursor"> -->

<div [hidden]="true" class="container" #printThis id="printElement" style="max-width:950px;">
    <div class="row">
        <div class="col-12 col-sm-12 col-md-12">
            <div class="row">
                <table class="table table-responsive table-borderless">
                    <thead>
                        <tr>
                            <th>
                                <img src="{{logo}}" class="img-responsive" style="width: 100%;height: 100px;" />
                            </th>
                            <th>
                                <div class="row">
                                    <div class="col-md-12 text-center">
                                        <div class="row">
                                            <div class="col-md-3"></div>
                                            <div class="col-md-9">
                                                <span class="font-18 font-500 color-black">{{invoiceNumber}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 text-center">
                                        <span class="font-20 font-600 color-black">{{companyName}}</span>
                                    </div>
                                    <div class="col-md-12 text-center">
                                        <span class="font-18 font-500 color-black">{{address}}</span>
                                    </div>
                                </div>
                            </th>
                        </tr>
                    </thead>
                </table>
            </div>
            <hr class="background-black" />
            <table class="table table-striped table-borderless">
                <thead>
                    <tr>
                        <th class="p-0 text-center">
                            {{companyContact}} |
                        </th>
                        <th class="p-0 text-center">
                            | {{companyEmail}}
                        </th>
                        <th class="p-0 text-center">
                            {{web}}
                        </th>
                    </tr>
                </thead>
            </table>
            <hr class="background-black" />
        </div>
    </div>
    <table class="table table-borderless" width="100%">
        <thead>
            <tr>
                <th colspan="6">
                    <div class="row">
                        <div class="col-md-12 text-center">
                            <h6 class="color-black">Billed To:</h6>
                            <h6 class="color-black">Sales Date:</h6>
                            <h6 class="color-black">No: 1234 Main</h6>
                        </div>
                    </div>
                </th>
                <th colspan="6">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-2"></div>
                                <div class="col-md-10 text-center">
                                    <span class="font-25 font-700 border-2 p-2 color-black">TAX INVOICE</span>
                                    <!-- <p class="font-20 font-500 mt-2 ml-4 color-black">Orignal</p> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </th>
            </tr>
        </thead>
    </table>
    <div *ngFor="let Data of CurrentData ; let i = index">
        <table class="table table-borderless">
            <thead>
                <tr>
                    <th colspan="4">
                        <div class='row'>
                            <div class="col-md-4 m-3">
                                <div class="row border-black">
                                    <div class="col-md-12">
                                        <span class="color-black">Customer:</span>
                                    </div>
                                    <div class="col-md-12">
                                        <p class="color-black">{{Data.customerName}}</p>
                                        <p class="color-black">{{Data.customerAddress}}</p>
                                    </div>
                                    <div class="col-md-12">
                                        <p class="color-black"><i class="fa fa-phone">{{Data.customerContact}}</i>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </th>
                    <th colspan="6">
                        <div class='row'>

                            <div class="col-md-8">

                            </div>
                        </div>
                    </th>
                </tr>
            </thead>
        </table>

        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <!-- <div class="panel-heading">
						<h3 class="panel-title"><strong>Order summary</strong></h3>
					</div> -->

                    <div class="panel-body">
                        <div class="table-responsive">
                            <table class="table table-custome table-bordered mb-0">
                                <thead>
                                    <tr>
                                        <td><strong>#</strong></td>
                                        <td><strong>Product</strong></td>
                                        <td class="text-center"><strong>Quantity</strong></td>
                                        <td class="text-center"><strong>Price</strong></td>
                                        <td class="text-right"><strong>Discount Amount</strong></td>
                                        <td class="text-right"><strong>Gross Amount</strong></td>
                                        <td class="text-right"><strong>Total Price</strong></td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- foreach ($order->lineItems as $line) or some such thing here -->
                                    <tr *ngFor="let item of Data.productDetailsList; let index = index">
                                        <td>{{index+1}}</td>
                                        <td>{{item.productName}}</td>
                                        <td class="text-center">{{item.quantity}}</td>
                                        <td class="text-center">{{item.price}}</td>
                                        <td class="text-center">{{item.discountAmount}}</td>
                                        <td class="text-center">{{item.grossAmount}}</td>
                                        <td class="text-right">{{item.totalPrice}}</td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-custome table-bordered">
                                <tbody>
                                    <tr>
                                        <td style="min-width:460px !important;">
                                            <div class="row m-2">
                                                <div class="col-md-12">
                                                    <div class="row border-black">
                                                        <div class="col-md-6 border-black">
                                                            <span class="color-black">P. Item: 0</span>
                                                        </div>
                                                        <div class="col-md-6 border-black">
                                                            <span class="color-black">P. Item: 0</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <span class="color-black">Discount Amount</span>
                                                        </div>
                                                        <div class="col-md-8 text-right">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <span class="color-black">Rs.
																			{{Data.discountAmount}}</span>
                                                                </div>
                                                                <div class="col-md-3"></div>

                                                                <!-- <div class="col-md-6 text-left">
																	<span class="color-black">1,576.00</span>
																</div> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <span class="color-black">Tax Amount</span>
                                                        </div>
                                                        <div class="col-md-8 text-right">
                                                            <div class="row">
                                                                <div class="col-md-3"></div>
                                                                <div class="col-md-6">
                                                                    <span class="color-black">Rs.
																			{{Data.taxAmount}}</span>
                                                                </div>
                                                                <!-- <div class="col-md-6 text-left">
																	<span class="color-black">1,576.00</span>
																</div> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class='col-md-12'>
                                                    <hr class="background-black" />
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <span class="color-black">Sub Total</span>
                                                        </div>
                                                        <div class="col-md-8 text-right">
                                                            <div class="row">
                                                                <div class="col-md-3"></div>
                                                                <div class="col-md-6">
                                                                    <span class="color-black">Rs.
																			{{Data.subTotal}}</span>
                                                                </div>
                                                                <!-- <div class="col-md-6 text-left">
																	<span class="color-black">1,576.00</span>
																</div> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="col-md-12">
													<div class="row">
														<div class="col-md-4">
															<span class="color-black">Round off</span>
														</div>
														<div class="col-md-8 text-right">
															<div class="row">
																<div class="col-md-3"></div>
																<div class="col-md-6">
																	<span class="color-black">Rs 1,576.00.</span>
																</div>
															</div>
														</div>
													</div>
												</div> -->
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <span class="color-black">Total Amount</span>
                                                        </div>
                                                        <div class="col-md-8 text-right">
                                                            <div class="row">
                                                                <div class="col-md-3"></div>
                                                                <div class="col-md-6">
                                                                    <span class="color-black">Rs.
																			{{Data.totalBill}}</span>
                                                                </div>
                                                                <!-- <div class="col-md-6 text-left">
																	<span class="color-black">1,576.00</span>
																</div> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class='row'>
                            <div class="col-md-1"></div>
                            <div class="col-md-11">
                                <span class="color-black">Amount In Words: <i>One Thousand Two Hundred And Twenty
											One</i></span>
                            </div>
                            <div class="col-md-1"></div>
                            <div class="col-md-11">
                                <span class="color-black">Thanks for your visit.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
